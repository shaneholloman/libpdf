/**
 * StandardEncoding - the default encoding for Type 1 fonts.
 *
 * This is the original PostScript encoding, used by many Type 1 fonts
 * as their base encoding.
 */

import { SimpleEncoding } from "./encoding.ts";

const STANDARD_TO_UNICODE: (number | undefined)[] = [
  // 0x00-0x1F: Control characters (undefined in PDF)
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  // 0x20-0x7E: Mostly ASCII with some differences
  0x0020,
  0x0021,
  0x0022,
  0x0023,
  0x0024,
  0x0025,
  0x0026,
  0x2019, // space ! " # $ % & ' (quoteright)
  0x0028,
  0x0029,
  0x002a,
  0x002b,
  0x002c,
  0x002d,
  0x002e,
  0x002f, // ( ) * + , - . /
  0x0030,
  0x0031,
  0x0032,
  0x0033,
  0x0034,
  0x0035,
  0x0036,
  0x0037, // 0 1 2 3 4 5 6 7
  0x0038,
  0x0039,
  0x003a,
  0x003b,
  0x003c,
  0x003d,
  0x003e,
  0x003f, // 8 9 : ; < = > ?
  0x0040,
  0x0041,
  0x0042,
  0x0043,
  0x0044,
  0x0045,
  0x0046,
  0x0047, // @ A B C D E F G
  0x0048,
  0x0049,
  0x004a,
  0x004b,
  0x004c,
  0x004d,
  0x004e,
  0x004f, // H I J K L M N O
  0x0050,
  0x0051,
  0x0052,
  0x0053,
  0x0054,
  0x0055,
  0x0056,
  0x0057, // P Q R S T U V W
  0x0058,
  0x0059,
  0x005a,
  0x005b,
  0x005c,
  0x005d,
  0x005e,
  0x005f, // X Y Z [ \ ] ^ _
  0x2018,
  0x0061,
  0x0062,
  0x0063,
  0x0064,
  0x0065,
  0x0066,
  0x0067, // ` (quoteleft) a b c d e f g
  0x0068,
  0x0069,
  0x006a,
  0x006b,
  0x006c,
  0x006d,
  0x006e,
  0x006f, // h i j k l m n o
  0x0070,
  0x0071,
  0x0072,
  0x0073,
  0x0074,
  0x0075,
  0x0076,
  0x0077, // p q r s t u v w
  0x0078,
  0x0079,
  0x007a,
  0x007b,
  0x007c,
  0x007d,
  0x007e,
  undefined, // x y z { | } ~ DEL
  // 0x80-0x9F: Undefined in StandardEncoding
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  // 0xA0-0xFF: StandardEncoding specific mappings
  undefined,
  0x00a1,
  0x00a2,
  0x00a3,
  0x2044,
  0x00a5,
  0x0192,
  0x00a7, // ¡ ¢ £ ⁄ ¥ ƒ §
  0x00a4,
  0x0027,
  0x201c,
  0x00ab,
  0x2039,
  0x203a,
  0xfb01,
  0xfb02, // ¤ ' " « ‹ › fi fl
  undefined,
  0x2013,
  0x2020,
  0x2021,
  0x00b7,
  undefined,
  0x00b6,
  0x2022, // – † ‡ · ¶ •
  0x201a,
  0x201e,
  0x201d,
  0x00bb,
  0x2026,
  0x2030,
  undefined,
  0x00bf, // ‚ „ " » … ‰ ¿
  undefined,
  0x0060,
  0x00b4,
  0x02c6,
  0x02dc,
  0x00af,
  0x02d8,
  0x02d9, // ` ´ ˆ ˜ ¯ ˘ ˙
  0x00a8,
  undefined,
  0x02da,
  0x00b8,
  undefined,
  0x02dd,
  0x02db,
  0x02c7, // ¨ ˚ ¸ ˝ ˛ ˇ
  0x2014,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined, // —
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  0x00c6,
  undefined,
  0x00aa,
  undefined,
  undefined,
  undefined,
  undefined, // Æ ª
  0x0141,
  0x00d8,
  0x0152,
  0x00ba,
  undefined,
  undefined,
  undefined,
  undefined, // Ł Ø Œ º
  undefined,
  0x00e6,
  undefined,
  undefined,
  undefined,
  0x0131,
  undefined,
  undefined, // æ ı
  0x0142,
  0x00f8,
  0x0153,
  0x00df,
  undefined,
  undefined,
  undefined,
  undefined, // ł ø œ ß
];

/**
 * StandardEncoding implementation.
 * Singleton instance available as `StandardEncoding.instance`.
 */
export class StandardEncoding extends SimpleEncoding {
  readonly name = "StandardEncoding";
  protected readonly toUnicode = STANDARD_TO_UNICODE;

  private static _instance: StandardEncoding | null = null;

  static get instance(): StandardEncoding {
    if (!StandardEncoding._instance) {
      StandardEncoding._instance = new StandardEncoding();
    }
    return StandardEncoding._instance;
  }
}
